$(document).ready(function(){function e(b,c){$.getJSON(php_variables.template_directory+"/svc/cache.php?lat="+b+"&long="+c,function(b){a=$.parseJSON(b),$("#maparea").gmap3(""),$.each(b.tweets,function(a,b){var c=[b.lat,b.lon];$("#maparea").gmap3({action:"addMarker",latLng:c,map:{center:!1}},{action:"addOverlay",content:'<div id="tweet'+b.tweet_id+'" class="marker"><img src="'+b.profile_image+'" class="tweetMarker" /><div class="tweet"><span>'+b.user+"</span><p>"+b.content+'</p><a class="retweet" href="#"></a><a class="mention" href="#"></a></div></div>',latLng:c,offset:{y:-40,x:-30}})})})}function g(){$("#toggles li a.active").each(function(){h($(this).attr("href"),$(this).parent().attr("class"))})}function h(c,d){$.getJSON(c,function(c){a=$.parseJSON(c),$.each(c.places,function(a,c){var f=(php_variables.template_url,c.coords.split(",",2)),g=[f[0],f[1]],h=c.cater;placeContainer='<div class="placeData" id="placeData'+b+'"><p class="streetview">See it up close. Drag your streeview!</p><a href="#" class="closeData">X</a><div class="qualinfo"><a href="'+c.permalink+'"><img src="'+c.photo+'"/></a><div class="marco"><h4><span>'+c.name+'</span></h4><p class="smaller" id="'+c.cater+'">'+c.cater+'</p><p class="desc">'+c.desc+'</p></div></div><div class="specialinfo"><a href="'+c.permalink+'">More Info</a><a class="fac" href="//www.facebook.com/sharer.php?s= 100&amp;p[title]='+c.name+"&amp;p[url]="+c.permalink+"&amp;p[images][0]="+c.photo+"&amp;p[summary]="+c.desc+'" target="_blank">Share It</a><a href="//twitter.com/share?text='+c.name+"&url="+c.permalink+'" target="_blank">Tweet It</a><a class="pin" href="//pinterest.com/pin/create/button/?url=http%3A%2F%2F'+php_variables.perm+"&media=http%3A%2F%2F"+php_variables.img+"&description="+c.desc+" on "+php_variables.bloginfo_url+'" target="_blank">Pin It</a></div>',$("#maparea").gmap3({marker:{latLng:g,id:h,options:{draggable:!1,icon:new google.maps.MarkerImage("yourImage.png")}},overlay:{latLng:g,options:{content:'<div id="mako" class="placeMark '+d+'"><a target="_blank" rel="'+b+'" title="'+c.name+'"><p class="infobox"><i class="piccontainer" style="background-image: url('+c.photo+');"></i><span>'+c.name+'</span><span class="info">'+c.address+"<br>"+c.phone+"<br>"+c.distance+'</span><b class="monumental" id="'+c.cater+'">'+c.cater+"</b></p><small></small></a></div>",offset:{y:-12,x:-15}}}}),$("body").append(placeContainer),b++})})}function i(a){$(".sidenav li a").each(function(a){var b=$(this).attr("rel"),c=b.split(",");e(c[0],c[1])})}function j(){$("#maparea").gmap3("clear","markers"),$(".placeData").hide(),$("#maparea").gmap3({marker:{address:php_variables.cebo_address,data:php_variables.bloginfo_name,options:{icon:php_variables.cebo_mapmarker}},map:{action:"init",options:{center:[d],scrollwheel:!1,zoom:14,mapTypeId:"style2",mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,"style1","style2"]}}},styledmaptype:{id:"style1",options:{name:"Style 1"},styles:[{featureType:"road.highway",elementType:"geometry",stylers:[{hue:"#ff0022"},{saturation:60},{lightness:-20}]}]}},{styledmaptype:{id:"style2",options:{name:"Style 2"},styles:[{featureType:"all",stylers:[{saturation:-80}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{hue:"#00ffee"},{saturation:50}]},{featureType:"poi.business",elementType:"labels",stylers:[{visibility:"off"}]}]}})}function l(a){var b=$("a[name='"+a+"']");$("html,body").animate({scrollTop:b.offset().top},"slow")}var a=[],b=0,d=php_variables.cebo_mapcenter.split(",");$("#clearMap").click(function(a){j(),a.preventDefault()}),$("#maparea").gmap3({marker:{address:php_variables.cebo_address,data:php_variables.bloginfo_name,options:{icon:php_variables.cebo_mapmarker}},map:{action:"init",options:{center:d,scrollwheel:!1,zoom:14,mapTypeId:"style2",mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,"style1","style2"]}}},styledmaptype:{id:"style1",options:{name:"Style 1"},styles:[{featureType:"road.highway",elementType:"geometry",stylers:[{hue:"#ff0022"},{saturation:60},{lightness:-20}]}]}},{styledmaptype:{id:"style2",options:{name:"Style 2"},styles:[{featureType:"all",stylers:[{saturation:-80}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{hue:"#00ffee"},{saturation:50}]},{featureType:"poi.business",elementType:"labels",stylers:[{visibility:"off"}]}]}}),g(),$("#toggles li a").click(function(a){a.preventDefault(),j(),$("#toggles li a").removeClass("active"),$(".placeData").hide(),$(this).addClass("active"),g()}),$(".sidenav li a").attr("href","").click(function(a){j(),i();var b=$(this).attr("rel"),c=b.split(","),d=new google.maps.LatLng(c[0],c[1]);e(c[0],c[1]),obLatLon=[c[0],c[1]],$("#maparea").gmap3({action:"panTo",args:[d],options:{zoom:8}},{action:"addOverlay",content:'<div class="location"><span>'+$(this).children("h1").html()+"</span></div>",latLng:obLatLon,offset:{y:-40,x:-30}}),a.preventDefault()}),$(".info").click(function(){$("#infoBox").toggle()}),$(".twitterl a").click(function(){j(),$(".placeData").hide(),i()}),$("#maparea").mouseover(function(a){$("#infoBox .closeData").click(function(){$("#infoBox").hide()}),$("#warning .closeData").click(function(){$("#warning").hide()}),$(".location").bind("click",function(){$(":contains("+$(this).children("span").html()+")").show()}),$(".placeMark a").mouseover("click",function(){$(".placeData").hide(),$("#placeData"+$(this).attr("rel")).show(),a.preventDefault()}),$("a.retweet").bind("click",function(a){$(".signin").length>0?$("#warning").show():($("#tweet").html(""),$("#ref").val(""),name=$(this).parent().children("span").html(),tweet=$(this).parent().children("p").html(),status="RT @"+name+" "+tweet,$("#tweet").html(status)),a.preventDefault()}),$("a.mention").bind("click",function(a){$(".signin").length>0?$("#warning").show():($("#tweet").html(""),$("#ref").val(""),name=$(this).parent().children("span").html(),tweet=$(this).parent().children("p").html(),$("#tweet").html("@"+name)),a.preventDefault()})}),$(function(){$(".panelMenu li#linkerson").toggle(function(){$(this).addClass("active"),$(this).next(".largebox").addClass("widest").animate({right:"215px",opacity:1},{queue:!1,duration:500})},function(){$(this).removeClass("active"),$(this).next(".largebox").removeClass("widest",500).animate({right:"0px",opacity:0},{queue:!1,duration:500})})}),$(function(){$(".linkersonclose").click(function(){$(".panelMenu li#linkerson").removeClass("active"),$(".largebox").removeClass("widest",500).animate({right:"0px",opacity:0},{queue:!1,duration:500})})}),$("#toggle-view li").click(function(){var a=$(this).children("div.panel");a.is(":hidden")?(a.slideDown("200"),$(this).children("span").addClass("toggle-minus"),$(this).addClass("activated")):(a.slideUp("200"),$(this).children("span").removeClass("toggle-minus"),$(this).children("span").addClass("toggle-plus"),$(this).removeClass("activated"))}),$("#link").click(function(){l("id3")})});